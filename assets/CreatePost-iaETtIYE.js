import{_ as v,o as r,c as i,a as h,u as f,r as n,d as e,n as b,m,v as k,j as y,g as l,k as S,t as g,p as x,h as C}from"./index-CW6ZNhlV.js";const T={},P={class:"loader"},w=h('<div class="bar1" data-v-a7006477></div><div class="bar2" data-v-a7006477></div><div class="bar3" data-v-a7006477></div><div class="bar4" data-v-a7006477></div><div class="bar5" data-v-a7006477></div><div class="bar6" data-v-a7006477></div><div class="bar7" data-v-a7006477></div><div class="bar8" data-v-a7006477></div><div class="bar9" data-v-a7006477></div><div class="bar10" data-v-a7006477></div><div class="bar11" data-v-a7006477></div><div class="bar12" data-v-a7006477></div>',12),I=[w];function N(t,s){return r(),i("div",P,I)}const V=v(T,[["render",N],["__scopeId","data-v-a7006477"]]),B=t=>(x("data-v-a65aa2c2"),t=t(),C(),t),$={id:"create-post-modal"},j={class:"create-post-background"},D={class:"create-post"},M=B(()=>e("h2",null,"Create a Post",-1)),O={type:"submit"},A={key:0,class:"text-red-500"},E={__name:"CreatePost",setup(t){const s=f(),o=n(""),c=n(null),d=n(!1);async function u(){d.value=!0,s.setCsrfToken(),console.log(`csrf from before post ${s.csrfToken}`);const a=await(await fetch("https://itter.pythonanywhere.com/api/create/post",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":s.csrfToken},body:JSON.stringify({content:o.value})})).json();a.error?(console.log(a.error),c.value=a.error):(console.log("success"),c.value=null,o.value=""),d.value=!1}return(_,a)=>(r(),i("div",$,[e("div",j,[e("div",D,[M,e("form",{onSubmit:b(u,["prevent"])},[m(e("textarea",{"onUpdate:modelValue":a[0]||(a[0]=p=>o.value=p),placeholder:"What's on your mind?"},null,512),[[k,o.value]]),e("button",O,[d.value?(r(),y(V,{key:0})):l("",!0),S(" Post")])],32),c.value?(r(),i("p",A,g(c.value),1)):l("",!0)])])]))}},J=v(E,[["__scopeId","data-v-a65aa2c2"]]);export{J as default};
