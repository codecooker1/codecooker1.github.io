import{_ as h,o as n,c as i,i as S,a as Z,b as e,u as F,d as N,r as d,e as b,p as J,f as E,g as c,t as k,h as P,j as y,k as L,l as T,m as H,n as U,w as _,q as f,s as R,v as X,x as Y,y as q,F as A,z}from"./index-CuUFbPYt.js";import{c as O,a as D,n as G}from"./index-DVI9koYg.js";import{I as W,C as K}from"./CreatePost-DtlwonqR.js";const Q=["src"],ee={__name:"ProfileIcon",props:["picUrl"],setup(t){const s=t;return(o,l)=>(n(),i("img",{src:s.picUrl,width:"42",height:"42",alt:"profile_pic"},null,8,Q))}},te=h(ee,[["__scopeId","data-v-df9a41f0"]]),se={title:"Like",class:"heart-container"},oe=["checked"],ne=N('<div class="svg-container" data-v-a9439e65><svg xmlns="http://www.w3.org/2000/svg" class="svg-outline" viewBox="0 0 24 24" data-v-a9439e65><path d="M17.5,1.917a6.4,6.4,0,0,0-5.5,3.3,6.4,6.4,0,0,0-5.5-3.3A6.8,6.8,0,0,0,0,8.967c0,4.547,4.786,9.513,8.8,12.88a4.974,4.974,0,0,0,6.4,0C19.214,18.48,24,13.514,24,8.967A6.8,6.8,0,0,0,17.5,1.917Zm-3.585,18.4a2.973,2.973,0,0,1-3.83,0C4.947,16.006,2,11.87,2,8.967a4.8,4.8,0,0,1,4.5-5.05A4.8,4.8,0,0,1,11,8.967a1,1,0,0,0,2,0,4.8,4.8,0,0,1,4.5-5.05A4.8,4.8,0,0,1,22,8.967C22,11.87,19.053,16.006,13.915,20.313Z" data-v-a9439e65></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="svg-filled" viewBox="0 0 24 24" data-v-a9439e65><path d="M17.5,1.917a6.4,6.4,0,0,0-5.5,3.3,6.4,6.4,0,0,0-5.5-3.3A6.8,6.8,0,0,0,0,8.967c0,4.547,4.786,9.513,8.8,12.88a4.974,4.974,0,0,0,6.4,0C19.214,18.48,24,13.514,24,8.967A6.8,6.8,0,0,0,17.5,1.917Z" data-v-a9439e65></path></svg><svg xmlns="http://www.w3.org/2000/svg" height="100" width="100" class="svg-celebrate" data-v-a9439e65><polygon points="10,10 20,20" data-v-a9439e65></polygon><polygon points="10,50 20,50" data-v-a9439e65></polygon><polygon points="20,80 30,70" data-v-a9439e65></polygon><polygon points="90,10 80,20" data-v-a9439e65></polygon><polygon points="90,50 80,50" data-v-a9439e65></polygon><polygon points="80,80 70,70" data-v-a9439e65></polygon></svg></div>',1),ae={__name:"LikeButton",props:["isLiked"],setup(t){const s=t,o=S("liked");return Z(()=>{o.value=s.isLiked,console.log(`from like button ${o.value}`)}),(l,p)=>(n(),i("div",se,[e("input",{id:"Give-It-An-Id",class:"checkbox",type:"checkbox",checked:F(o)},null,8,oe),ne]))}},le=h(ae,[["__scopeId","data-v-a9439e65"]]),V=t=>(L("data-v-754b3eec"),t=t(),T(),t),ce={class:"poster-info"},ie={class:"info"},re={class:"handle"},de={class:"main-post"},ue=V(()=>e("br",null,null,-1)),_e=V(()=>e("br",null,null,-1)),pe={key:0,class:"media-gallery"},he=["src"],ve=V(()=>e("div",{class:"h-2"},null,-1)),me={class:"action-bar"},ge={class:"action-btn"},fe={__name:"SinglePost",props:["post_id"],setup(t){const s=d("default_name"),o=d("default_handle"),l=d(""),p=d(""),m=d(""),v=d(0),u=d(!1),g=S("hostname"),j=b();J("liked",u);const w=t;async function B(){console.log(w.post_id);const a=await(await fetch(`${g}/api/post/detail/${w.post_id}`,{method:"GET",credentials:"include"})).json();s.value=a.user.first_name+" "+a.user.last_name,o.value=a.user.username,l.value=a.user.profile_image,p.value=a.content,m.value=a.image,v.value=a.likes,u.value=a.is_liked,console.log(u.value)}E(async()=>{B(),setInterval($,5e4)});async function M(){console.log(w.post_id);const a=await(await fetch(`${g}/api/like/post/`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":j.csrfToken},body:JSON.stringify({post_id:w.post_id})})).json();console.log(a),u.value?v.value-=1:v.value+=1,u.value=!u.value}async function $(){const a=await(await fetch(`${g}/api/post/detail/${w.post_id}`)).json();v.value=a.likes}return(r,a)=>(n(),i("article",null,[e("div",ce,[c(te,{picUrl:l.value},null,8,["picUrl"]),e("div",ie,[e("p",null,k(s.value),1),e("p",re,"@"+k(o.value),1)])]),e("div",de,[P(r.$slots,"default",{},()=>[ue,e("div",null,k(p.value),1),_e])]),m.value?(n(),i("div",pe,[e("img",{src:m.value,alt:"Unable to load Image"},null,8,he)])):y("",!0),ve,e("div",me,[e("div",ge,[c(le,{onClick:M,isLiked:u.value},null,8,["isLiked"]),e("p",null,k(v.value),1)])])]))}},we=h(fe,[["__scopeId","data-v-754b3eec"]]),$e=t=>(L("data-v-8ec19c3e"),t=t(),T(),t),ke={class:"transition duration-75 text-gray-400 group-hover:text-white"},xe=$e(()=>e("svg",{class:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 22 21"},[e("path",{d:"M16.975 11H10V4.025a1 1 0 0 0-1.066-.998 8.5 8.5 0 1 0 9.039 9.039.999.999 0 0 0-1-1.066h.002Z"}),e("path",{d:"M12.5 0c-.157 0-.311.01-.565.027A1 1 0 0 0 11 1.02V10h8.975a1 1 0 0 0 1-.935c.013-.188.028-.374.028-.565A8.51 8.51 0 0 0 12.5 0Z"})],-1)),be={class:"ms-5 text-2xl btn-text"},ye={__name:"SidebarButton",props:["link"],setup(t){return(s,o)=>{const l=H("router-link");return n(),U(l,{to:t.link,class:"flex items-center p-2 rounded-3xl hover:bg-gray-700 group"},{default:_(()=>[e("div",ke,[P(s.$slots,"icon",{},()=>[xe],!0)]),e("span",be,[P(s.$slots,"default",{},()=>[f("Dashboards")],!0)])]),_:3},8,["to"])}}},x=h(ye,[["__scopeId","data-v-8ec19c3e"]]),Ie={},Ce={class:"w-[36px] h-[36px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},Se=e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-width":"2.3",d:"m21 21-3.5-3.5M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Z"},null,-1),je=[Se];function Be(t,s){return n(),i("svg",Ce,je)}const Me=h(Ie,[["render",Be]]),Pe={},Ze={class:"w-[36px] h-[36px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},Le=e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2.3",d:"M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18Zm0 0a8.949 8.949 0 0 0 4.951-1.488A3.987 3.987 0 0 0 13 16h-2a3.987 3.987 0 0 0-3.951 3.512A8.948 8.948 0 0 0 12 21Zm3-11a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"},null,-1),Te=[Le];function Ue(t,s){return n(),i("svg",Ze,Te)}const Ve=h(Pe,[["render",Ue]]),Ae={},Fe={class:"w-[36px] h-[36px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24"},Ne=e("path",{"fill-rule":"evenodd",d:"M11.293 3.293a1 1 0 0 1 1.414 0l6 6 2 2a1 1 0 0 1-1.414 1.414L19 12.414V19a2 2 0 0 1-2 2h-3a1 1 0 0 1-1-1v-3h-2v3a1 1 0 0 1-1 1H7a2 2 0 0 1-2-2v-6.586l-.293.293a1 1 0 0 1-1.414-1.414l2-2 6-6Z","clip-rule":"evenodd"},null,-1),Je=[Ne];function Ee(t,s){return n(),i("svg",Fe,Je)}const He=h(Ae,[["render",Ee]]),Re={},Xe={class:"w-[36px] h-[36px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},Ye=e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2.3",d:"m8.032 12 1.984 1.984 4.96-4.96m4.55 5.272.893-.893a1.984 1.984 0 0 0 0-2.806l-.893-.893a1.984 1.984 0 0 1-.581-1.403V7.04a1.984 1.984 0 0 0-1.984-1.984h-1.262a1.983 1.983 0 0 1-1.403-.581l-.893-.893a1.984 1.984 0 0 0-2.806 0l-.893.893a1.984 1.984 0 0 1-1.403.581H7.04A1.984 1.984 0 0 0 5.055 7.04v1.262c0 .527-.209 1.031-.581 1.403l-.893.893a1.984 1.984 0 0 0 0 2.806l.893.893c.372.372.581.876.581 1.403v1.262a1.984 1.984 0 0 0 1.984 1.984h1.262c.527 0 1.031.209 1.403.581l.893.893a1.984 1.984 0 0 0 2.806 0l.893-.893a1.985 1.985 0 0 1 1.403-.581h1.262a1.984 1.984 0 0 0 1.984-1.984V15.7c0-.527.209-1.031.581-1.403Z"},null,-1),qe=[Ye];function ze(t,s){return n(),i("svg",Xe,qe)}const Oe=h(Re,[["render",ze]]),De={},Ge={class:"w-[46px] h-[46px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"46",height:"46",fill:"none",viewBox:"0 0 24 24"},We=e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2.3",d:"m10.827 5.465-.435-2.324m.435 2.324a5.338 5.338 0 0 1 6.033 4.333l.331 1.769c.44 2.345 2.383 2.588 2.6 3.761.11.586.22 1.171-.31 1.271l-12.7 2.377c-.529.099-.639-.488-.749-1.074C5.813 16.73 7.538 15.8 7.1 13.455c-.219-1.169.218 1.162-.33-1.769a5.338 5.338 0 0 1 4.058-6.221Zm-7.046 4.41c.143-1.877.822-3.461 2.086-4.856m2.646 13.633a3.472 3.472 0 0 0 6.728-.777l.09-.5-6.818 1.277Z"},null,-1),Ke=[We];function Qe(t,s){return n(),i("svg",Ge,Ke)}const et=h(De,[["render",Qe]]),tt={},st={class:"w-[36px] h-[36px] text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},ot=e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 12h4M4 18v-1a3 3 0 0 1 3-3h4a3 3 0 0 1 3 3v1a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1Zm8-10a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"},null,-1),nt=[ot];function at(t,s){return n(),i("svg",st,nt)}const lt=h(tt,[["render",at]]),ct={class:"sidebar"},it={class:"items"},rt={class:"icon-panel"},dt={class:"ico"},ut=e("div",{class:"flex-spacer"},null,-1),_t={__name:"SidebarView",setup(t){const s=b(),o=R(),l=async()=>{try{await s.logout(o)}catch(p){console.error(p)}};return(p,m)=>(n(),i("aside",ct,[e("div",it,[e("div",rt,[e("ul",dt,[e("li",null,[c(x,{link:{name:"home"}},{icon:_(()=>[c(He)]),default:_(()=>[f(" Home ")]),_:1})]),e("li",null,[c(x,{link:{name:"explore"}},{icon:_(()=>[c(Me)]),default:_(()=>[f(" Explore ")]),_:1})]),e("li",null,[c(x,{link:{name:"notifications"}},{icon:_(()=>[c(et)]),default:_(()=>[f(" Notifications ")]),_:1})]),e("li",null,[c(x,{link:{name:"profile"}},{icon:_(()=>[c(Ve)]),default:_(()=>[f(" Profile ")]),_:1})]),e("li",null,[c(x,{link:{name:"pricing"}},{icon:_(()=>[c(Oe)]),default:_(()=>[f(" Pro ")]),_:1})]),e("li",null,[c(x,{link:"",onClick:l},{icon:_(()=>[c(lt)]),default:_(()=>[f(" Logout/Login ")]),_:1})])])])]),ut]))}},I=t=>(L("data-v-c191caaa"),t=t(),T(),t),pt={class:"userbar"},ht=I(()=>e("label",{for:"message",class:"block mb-2 text-sm font-medium text-white"},"What's on your mind?",-1)),vt=I(()=>e("i",{class:"fa fa-cloud-upload"},null,-1)),mt=I(()=>e("br",null,null,-1)),gt=I(()=>e("br",null,null,-1)),ft={class:"sbutton",type:"submit",name:"submit"},wt={key:0,class:"text-red-500"},$t=I(()=>e("div",{class:"flex-spacer"},null,-1)),kt={class:"user"},xt={class:"user-image"},bt=["src"],yt={class:"user-info"},It={__name:"UserSidebar",setup(t){const s=d(null),o=d(b()),l=d(""),p=d(!1),m=d(null),v=d(null),u=d(""),g=S("hostname");async function j($){console.log("uploading file");const r=await D($);console.log(`file: ${r}`),console.log(`usernamr: ${o.value.user.username}`);const{data:a,error:C}=await m.value.storage.from("ItterMedia").upload(`/${o.value.user.username}/${G()}.webp`,r,{contentType:"image/webp"});C?(console.error("Error uploading file:",C),C.value=C):(console.log("File uploaded successfully:",a),u.value=await m.value.storage.from("ItterMedia").getPublicUrl(a.path).data.publicUrl,console.log("Public URL:",u.value))}async function w(){p.value=!0,o.value.setCsrfToken(),v.value&&await j(v.value),console.log(`csrf from before post ${o.value.csrfToken}`);const r=await(await fetch(`${g}/api/create/post`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":o.value.csrfToken},body:JSON.stringify({content:l.value})})).json();r.error?(console.log(r.error),s.value=r.error):(console.log("success"),s.value=null,l.value=""),p.value=!1}async function B($){v.value=$.target.files[0]}function M(){document.getElementById("pi").click()}return Z(async()=>{o.value=b(),o.value.fetchUser(),m.value=O("https://jzydvbxwyynlezjnqbbd.supabase.co/","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp6eWR2Ynh3eXlubGV6am5xYmJkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjUwNDY3MjEsImV4cCI6MjA0MDYyMjcyMX0.kY7-gqw6RK42QZZ46WrNw9YLD3qmK9Ct9G-9NuHuW8w")}),($,r)=>(n(),i("aside",pt,[e("form",{class:"mx-auto",onSubmit:q(w,["prevent"]),method:"post"},[ht,X(e("textarea",{id:"message ",rows:"4","onUpdate:modelValue":r[0]||(r[0]=a=>l.value=a),class:"block p-2.5 w-full text-sm rounded-lg border bg-gray-700 border-gray-600 placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500",placeholder:"What's on your mind...",name:"message",required:""},null,512),[[Y,l.value]]),e("label",{for:"pi",onClick:M},[vt,f(" Upload Image "),e("input",{style:{padding:"0px"},onChange:r[1]||(r[1]=a=>B(a)),placeholder:"profile_image",id:"pi",type:"file",name:"profile_image",accept:"image/*",class:"textInput",capture:""},null,32)]),mt,gt,e("button",ft,[p.value?(n(),U(W,{key:0})):y("",!0),f(" Create Post ")])],32),s.value?(n(),i("p",wt,k(s.value),1)):y("",!0),$t,e("div",kt,[e("div",xt,[e("img",{src:o.value.user.profile_image,alt:"User Profile Image"},null,8,bt)]),e("div",yt,[e("h2",null,k(o.value.user.username),1),e("p",null,k(o.value.user.email),1)])])]))}},Ct=h(It,[["__scopeId","data-v-c191caaa"]]),St={},jt={class:"w-[46px] h-[46px] text-gray-100","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"46",height:"46",fill:"none",viewBox:"0 0 24 24"},Bt=e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m4.988 19.012 5.41-5.41m2.366-6.424 4.058 4.058-2.03 5.41L5.3 20 4 18.701l3.355-9.494 5.41-2.029Zm4.626 4.625L12.197 6.61 14.807 4 20 9.194l-2.61 2.61Z"},null,-1),Mt=[Bt];function Pt(t,s){return n(),i("svg",jt,Mt)}const Zt=h(St,[["render",Pt]]),Lt={class:"structure"},Tt={class:"usersidebar-wrapper"},Ut={class:"feedarea"},Vt=e("div",{class:"h-2"},null,-1),At={class:"sidebar-wrapper"},Et={__name:"HomeView",setup(t){const s=d([]),o=b(),l=d(!1),p=S("hostname");Z(async()=>{const u=await(await fetch(`${p}/api/feed/`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":o.csrfToken,"Accept-Encoding":"gzip, deflate, br"}})).json();s.value=u.posts,console.log(s)});async function m(){l.value=!l.value}return(v,u)=>(n(),i(A,null,[e("div",Lt,[e("div",Tt,[c(Ct)]),e("main",Ut,[Vt,(n(!0),i(A,null,z(s.value,g=>(n(),i("div",{class:"post",key:g.post_id},[c(we,{post_id:g.post_id},null,8,["post_id"])]))),128)),F(o).user?(n(),i("button",{key:0,class:"create-post-button",onClick:m},[c(Zt)])):y("",!0)]),e("div",At,[c(_t)])]),l.value?(n(),U(K,{key:0,onClose:u[0]||(u[0]=g=>l.value=!1)})):y("",!0)],64))}};export{Et as default};
