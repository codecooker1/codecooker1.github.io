import{_ as m,o as l,c as u,a as h,u as y,r as d,b as g,d as a,n as v,m as I,v as k,j as C,g as p,k as w,t as x,p as S,h as j}from"./index-D6hzASV6.js";import{c as M}from"./index-XTwohaX1.js";const J={},N={class:"loader"},T=h('<div class="bar1" data-v-a7006477></div><div class="bar2" data-v-a7006477></div><div class="bar3" data-v-a7006477></div><div class="bar4" data-v-a7006477></div><div class="bar5" data-v-a7006477></div><div class="bar6" data-v-a7006477></div><div class="bar7" data-v-a7006477></div><div class="bar8" data-v-a7006477></div><div class="bar9" data-v-a7006477></div><div class="bar10" data-v-a7006477></div><div class="bar11" data-v-a7006477></div><div class="bar12" data-v-a7006477></div>',12),V=[T];function Y(t,s){return l(),u("div",N,V)}const P=m(J,[["render",Y],["__scopeId","data-v-a7006477"]]),b=t=>(S("data-v-1e8585e2"),t=t(),j(),t),X={id:"create-post-modal"},$=b(()=>a("h2",null,"Create a Post",-1)),q=b(()=>a("label",{for:"message",class:"block mb-2 text-sm font-medium text-white"},null,-1)),z={class:"sbutton",type:"submit",name:"submit"},B={key:0,class:"text-red-500"},D={__name:"CreatePost",emits:["close"],setup(t){const s=y(),o=d(""),r=d(null),n=d(!1),f=d(null);g(()=>{f.value=M("https://jzydvbxwyynlezjnqbbd.supabase.co/","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp6eWR2Ynh3eXlubGV6am5xYmJkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjUwNDY3MjEsImV4cCI6MjA0MDYyMjcyMX0.kY7-gqw6RK42QZZ46WrNw9YLD3qmK9Ct9G-9NuHuW8w")});async function _(){n.value=!0,s.setCsrfToken(),console.log(`csrf from before post ${s.csrfToken}`);const e=await(await fetch("https://itter.pythonanywhere.com/api/create/post",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":s.csrfToken},body:JSON.stringify({content:o.value})})).json();e.error?(console.log(e.error),r.value=e.error):(console.log("success"),r.value=null,o.value=""),n.value=!1}return(c,e)=>(l(),u("div",X,[a("div",{class:"create-post-background",onClick:e[3]||(e[3]=i=>c.$emit("close"))},[a("div",{class:"create-post",onClick:e[2]||(e[2]=v(()=>{},["stop"]))},[$,a("form",{onSubmit:v(_,["prevent"])},[q,I(a("textarea",{"onUpdate:modelValue":e[0]||(e[0]=i=>o.value=i),placeholder:"What's on your mind?",class:"block p-2.5 w-full text-sm rounded-lg border bg-gray-700 border-gray-600 placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500",required:""},null,512),[[k,o.value]]),a("input",{style:{padding:"0px"},onChange:e[1]||(e[1]=i=>c.handleFileUpload(i)),placeholder:"profile_image",id:"pi",type:"file",name:"profile_image",accept:"image/*",class:"textInput",required:"",capture:""},null,32),a("button",z,[n.value?(l(),C(P,{key:0})):p("",!0),w(" Post")])],32),r.value?(l(),u("p",B,x(r.value),1)):p("",!0)])])]))}},F=m(D,[["__scopeId","data-v-1e8585e2"]]);export{F as default};
