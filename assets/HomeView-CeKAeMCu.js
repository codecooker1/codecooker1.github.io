import{_ as h,r as J,o as a,c as C,w as i,a as e,b as S,d as _,p as M,e as Z,f as c,u as $,g as j,h as n,i as y,j as d,k as B,l as L,m as T,v as R,n as k,q as Y,t as I,F as A,R as D}from"./index-BpCl2Rvf.js";import{c as E,a as H,n as X}from"./index-CB4Fp7AF.js";import{I as q,C as z}from"./CreatePost--JHr1fQZ.js";const O=t=>(M("data-v-8ec19c3e"),t=t(),Z(),t),W={class:"transition duration-75 text-gray-400 group-hover:text-white"},G=O(()=>e("svg",{class:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 22 21"},[e("path",{d:"M16.975 11H10V4.025a1 1 0 0 0-1.066-.998 8.5 8.5 0 1 0 9.039 9.039.999.999 0 0 0-1-1.066h.002Z"}),e("path",{d:"M12.5 0c-.157 0-.311.01-.565.027A1 1 0 0 0 11 1.02V10h8.975a1 1 0 0 0 1-.935c.013-.188.028-.374.028-.565A8.51 8.51 0 0 0 12.5 0Z"})],-1)),K={class:"ms-5 text-2xl btn-text"},Q={__name:"SidebarButton",props:["link"],setup(t){return(s,o)=>{const r=J("router-link");return a(),C(r,{to:t.link,class:"flex items-center p-2 rounded-3xl hover:bg-gray-700 group"},{default:i(()=>[e("div",W,[S(s.$slots,"icon",{},()=>[G],!0)]),e("span",K,[S(s.$slots,"default",{},()=>[_("Dashboards")],!0)])]),_:3},8,["to"])}}},w=h(Q,[["__scopeId","data-v-8ec19c3e"]]),ee={},te={class:"w-[36px] h-[36px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},se=e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-width":"1.9",d:"m21 21-3.5-3.5M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Z"},null,-1),oe=[se];function ne(t,s){return a(),c("svg",te,oe)}const ae=h(ee,[["render",ne]]),re={},le={class:"w-[36px] h-[36px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},ie=e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.9",d:"M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18Zm0 0a8.949 8.949 0 0 0 4.951-1.488A3.987 3.987 0 0 0 13 16h-2a3.987 3.987 0 0 0-3.951 3.512A8.948 8.948 0 0 0 12 21Zm3-11a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"},null,-1),ce=[ie];function ue(t,s){return a(),c("svg",le,ce)}const de=h(re,[["render",ue]]),_e={},he={class:"w-[36px] h-[36px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},pe=e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.9",d:"m4 12 8-8 8 8M6 10.5V19a1 1 0 0 0 1 1h3v-3a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3h3a1 1 0 0 0 1-1v-8.5"},null,-1),me=[pe];function fe(t,s){return a(),c("svg",he,me)}const ge=h(_e,[["render",fe]]),we={},ve={class:"w-[36px] h-[36px]","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},xe=e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.9",d:"m10.827 5.465-.435-2.324m.435 2.324a5.338 5.338 0 0 1 6.033 4.333l.331 1.769c.44 2.345 2.383 2.588 2.6 3.761.11.586.22 1.171-.31 1.271l-12.7 2.377c-.529.099-.639-.488-.749-1.074C5.813 16.73 7.538 15.8 7.1 13.455c-.219-1.169.218 1.162-.33-1.769a5.338 5.338 0 0 1 4.058-6.221Zm-7.046 4.41c.143-1.877.822-3.461 2.086-4.856m2.646 13.633a3.472 3.472 0 0 0 6.728-.777l.09-.5-6.818 1.277Z"},null,-1),$e=[xe];function ke(t,s){return a(),c("svg",ve,$e)}const be=h(we,[["render",ke]]),Ie={},ye={class:"w-[36px] h-[36px] text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},Ce=e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.9",d:"M16 12h4M4 18v-1a3 3 0 0 1 3-3h4a3 3 0 0 1 3 3v1a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1Zm8-10a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"},null,-1),Se=[Ce];function Me(t,s){return a(),c("svg",ye,Se)}const Ze=h(Ie,[["render",Me]]),je={class:"sidebar"},Be={class:"items"},Ve={class:"icon-panel"},Pe={class:"ico"},Ue=e("li",null,null,-1),Fe=e("div",{class:"flex-spacer"},null,-1),Ne={__name:"SidebarView",setup(t){const s=$(),o=j(),r=async()=>{try{await s.logout(o)}catch(u){console.error(u)}};return(u,f)=>(a(),c("aside",je,[e("div",Be,[e("div",Ve,[e("ul",Pe,[e("li",null,[n(w,{link:{name:"home"}},{icon:i(()=>[n(ge)]),default:i(()=>[_(" Home ")]),_:1})]),e("li",null,[n(w,{link:{name:"explore"}},{icon:i(()=>[n(ae)]),default:i(()=>[_(" Explore ")]),_:1})]),e("li",null,[n(w,{link:{name:"notifications"}},{icon:i(()=>[n(be)]),default:i(()=>[_(" Notifications ")]),_:1})]),e("li",null,[n(w,{link:{name:"user",params:{username:y(s).user.username}}},{icon:i(()=>[n(de)]),default:i(()=>[_(" Profile ")]),_:1},8,["link"])]),Ue,e("li",null,[n(w,{link:"",onClick:r},{icon:i(()=>[n(Ze)]),default:i(()=>[_(" Logout/Login ")]),_:1})])])])]),Fe]))}},v=t=>(M("data-v-c191caaa"),t=t(),Z(),t),Je={class:"userbar"},Le=v(()=>e("label",{for:"message",class:"block mb-2 text-sm font-medium text-white"},"What's on your mind?",-1)),Te=v(()=>e("i",{class:"fa fa-cloud-upload"},null,-1)),Re=v(()=>e("br",null,null,-1)),Ye=v(()=>e("br",null,null,-1)),Ae={class:"sbutton",type:"submit",name:"submit"},De={key:0,class:"text-red-500"},Ee=v(()=>e("div",{class:"flex-spacer"},null,-1)),He={class:"user"},Xe={class:"user-image"},qe=["src"],ze={class:"user-info"},Oe={__name:"UserSidebar",setup(t){const s=d(null),o=d($()),r=d(""),u=d(!1),f=d(null),p=d(null),b=d(""),V=B("hostname");async function P(g){console.log("uploading file");const l=await H(g);console.log(`file: ${l}`),console.log(`usernamr: ${o.value.user.username}`);const{data:m,error:x}=await f.value.storage.from("ItterMedia").upload(`/${o.value.user.username}/${X()}.webp`,l,{contentType:"image/webp"});x?(console.error("Error uploading file:",x),x.value=x):(console.log("File uploaded successfully:",m),b.value=await f.value.storage.from("ItterMedia").getPublicUrl(m.path).data.publicUrl,console.log("Public URL:",b.value))}async function U(){u.value=!0,o.value.setCsrfToken(),p.value&&await P(p.value),console.log(`csrf from before post ${o.value.csrfToken}`);const l=await(await fetch(`${V}/api/create/post`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":o.value.csrfToken},body:JSON.stringify({content:r.value})})).json();l.error?(console.log(l.error),s.value=l.error):(console.log("success"),s.value=null,r.value=""),u.value=!1}async function F(g){p.value=g.target.files[0]}function N(){document.getElementById("pi").click()}return L(async()=>{o.value=$(),o.value.fetchUser(),f.value=E("https://jzydvbxwyynlezjnqbbd.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp6eWR2Ynh3eXlubGV6am5xYmJkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjUwNDY3MjEsImV4cCI6MjA0MDYyMjcyMX0.kY7-gqw6RK42QZZ46WrNw9YLD3qmK9Ct9G-9NuHuW8w")}),(g,l)=>(a(),c("aside",Je,[e("form",{class:"mx-auto",onSubmit:Y(U,["prevent"]),method:"post"},[Le,T(e("textarea",{id:"message ",rows:"4","onUpdate:modelValue":l[0]||(l[0]=m=>r.value=m),class:"block p-2.5 w-full text-sm rounded-lg border bg-gray-700 border-gray-600 placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500",placeholder:"What's on your mind...",name:"message",required:""},null,512),[[R,r.value]]),e("label",{for:"pi",onClick:N},[Te,_(" Upload Image "),e("input",{style:{padding:"0px"},onChange:l[1]||(l[1]=m=>F(m)),placeholder:"profile_image",id:"pi",type:"file",name:"profile_image",accept:"image/*",class:"textInput",capture:""},null,32)]),Re,Ye,e("button",Ae,[u.value?(a(),C(q,{key:0})):k("",!0),_(" Create Post ")])],32),s.value?(a(),c("p",De,I(s.value),1)):k("",!0),Ee,e("div",He,[e("div",Xe,[e("img",{src:o.value.user.profile_image,alt:"User Profile Image"},null,8,qe)]),e("div",ze,[e("h2",null,I(o.value.user.username),1),e("p",null,I(o.value.user.email),1)])])]))}},We=h(Oe,[["__scopeId","data-v-c191caaa"]]),Ge={},Ke={class:"w-[46px] h-[46px] text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"46",height:"46",fill:"none",viewBox:"0 0 24 24"},Qe=e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.7",d:"m4.988 19.012 5.41-5.41m2.366-6.424 4.058 4.058-2.03 5.41L5.3 20 4 18.701l3.355-9.494 5.41-2.029Zm4.626 4.625L12.197 6.61 14.807 4 20 9.194l-2.61 2.61Z"},null,-1),et=[Qe];function tt(t,s){return a(),c("svg",Ke,et)}const st=h(Ge,[["render",tt]]),ot={class:"structure"},nt={class:"usersidebar-wrapper"},at={class:"feedarea"},rt={class:"sidebar-wrapper"},ut={__name:"HomeView",setup(t){const s=j(),o=$(),r=d(!1);B("hostname"),o.isAuthenticated||s.push({name:"signin"});async function u(){r.value=!r.value}return(f,p)=>(a(),c(A,null,[e("div",ot,[e("div",nt,[n(We)]),e("main",at,[n(y(D)),y(o).user?(a(),c("button",{key:0,class:"create-post-button",onClick:u},[n(st)])):k("",!0)]),e("div",rt,[n(Ne)])]),r.value?(a(),C(z,{key:0,onClose:p[0]||(p[0]=b=>r.value=!1)})):k("",!0)],64))}};export{ut as default};
